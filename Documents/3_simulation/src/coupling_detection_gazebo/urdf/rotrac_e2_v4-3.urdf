<?xml version="1.0"?>
<robot name="rotrac_e2">
       
    <gazebo>
        <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
            <robotNamespace>/rotrac_e2</robotNamespace>
        </plugin>

        <plugin name="gazebo_ros_imu_controller" filename="libgazebo_ros_imu.so">
            <robotNamespace>/rotrac_e2</robotNamespace>
            <topicName>imu/data</topicName>
            <serviceName>imu/service</serviceName>
            <bodyName>base_link</bodyName>
            <gaussianNoise>0</gaussianNoise>
            <rpyOffsets>0 0 0</rpyOffsets>
            <updateRate>10.0</updateRate>
            <alwaysOn>true</alwaysOn>
            <gaussianNoise>0</gaussianNoise>
        </plugin>
    </gazebo>
    
    <link name="base_link">
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
                <box size=".01 .01 .01"/>
            </geometry>
        </collision>
        
    </link>
    
    
    <!-- _______________________________________________ Body _______________________________________________ -->
    <link name="mainbody_link">
        <visual>
            <origin xyz="0 0 -0.4" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_body_white_v4.dae" scale="1 1 1"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="0 0 -0.4" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_body_collision.dae" scale="1 1 1"/>
            </geometry>
        </collision>

        <inertial>
            <origin xyz="0 0 0.35" rpy="0 0 0"/>
            <mass value="3400"/>
            <inertia ixx="700" iyy="1000" izz="1200" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    <gazebo reference="mainbody_link">
        <material>Gazebo/White</material>
    </gazebo>
    
    <joint name="mainbody_joint" type="fixed">
        <parent link="base_link"/>
        <child link="mainbody_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>
    
    <link name="body_black_link">
        <visual>
            <origin xyz="0 0 -0.4" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_body_black_v1.dae" scale="1 1 1"/>
            </geometry>
        </visual>
    </link>
    <gazebo reference="body_black_link">
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="body_black_joint" type="fixed">
        <parent link="base_link"/>
        <child link="body_black_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>
    
    <link name="body_green_link">
        <visual>
            <origin xyz="0 0 -0.4" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_body_green_v4.dae" scale="1 1 1"/>
            </geometry>
        </visual>
    </link>
    <gazebo reference="body_green_link">
        <material>Gazebo/Green</material>
    </gazebo>
    
    <joint name="body_green_fixed" type="fixed">
        <parent link="base_link"/>
        <child link="body_green_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>
    
    
    <!-- _______________________________________________ Gummirad vorne rechts _______________________________________________ -->

	<link name="front_right_wheel_white_link">
        <visual>
            <origin xyz="0 0 .35" rpy="-1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_white.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".7" radius=".045"/>
            </geometry>
        </collision>

        <inertial>
            <mass value="35"/>
            <inertia ixx="1.447" iyy="1.447" izz=".035" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="front_right_wheel_white_link">
        <material>Gazebo/White</material>
    </gazebo>
    
     <joint name="front_right_wheel_white_joint" type="continuous">
        <parent link="mainbody_link"/>
        <child link="front_right_wheel_white_link"/>
        <origin rpy="-1.5708 0 0" xyz="0.575 -.35 0"/>
        <limit effort="2500" velocity="100" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
    <link name="front_right_wheel_black_link">
        <visual>
            <origin xyz="0 0 .73" rpy="-1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".12" radius=".246"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="30"/>
            <inertia ixx=".49" iyy=".49" izz=".91" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="front_right_wheel_black_link">
        
        <mu1>0.9</mu1>
       
        <mu2>0.9</mu2>
        <!--
            
        <fdir1>1 0 0</fdir1>
               
        <min_depth>0.01</min_depth> 
        
        <kd>32000.0</kd>
        <kp>16000000.0</kp>
          -->      
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="front_right_wheel_black_joint" type="fixed">
        <parent link="front_right_wheel_white_link"/>
        <child link="front_right_wheel_black_link"/>
        <origin rpy="0 0 0" xyz=".0 0 -.38"/>
    </joint>
    <!-- _______________________________________________ Gummirad vorne links _______________________________________________ -->
    

    <link name="front_left_wheel_white_link">
        <visual>
            <origin xyz="0 0 -.35" rpy="1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_white.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".7" radius=".045"/>
            </geometry>
        </collision>

        <inertial>
            <mass value="35"/>
            <inertia ixx="1.447" iyy="1.447" izz=".035" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="front_left_wheel_white_link">
        <material>Gazebo/White</material>
    </gazebo>
    
    <joint name="front_left_wheel_white_joint" type="continuous">
        <parent link="mainbody_link"/>
        <child link="front_left_wheel_white_link"/>
        <origin rpy="-1.5708 0 0" xyz="0.575 .35 0"/>
        <limit effort="2500" velocity="100" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
    <link name="front_left_wheel_black_link">
        <visual>
            <origin xyz="0 0 -.73" rpy="1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".12" radius=".246"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="30"/>
            <inertia ixx=".49" iyy=".49" izz=".91" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="front_left_wheel_black_link">
        
        <mu1>0.9</mu1>
       
        <mu2>0.9</mu2>
        <!--
            
        <fdir1>1 0 0</fdir1>
        
        <min_depth>0.01</min_depth> 
        
        <kd>32000.0</kd>
        <kp>16000000.0</kp>
        -->
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="front_left_wheel_black_joint" type="fixed">
        <parent link="front_left_wheel_white_link"/>
        <child link="front_left_wheel_black_link"/>
        <origin rpy="0 0 0" xyz=".0 0 .38"/>
    </joint>
    
    <!-- _______________________________________________ Gummirad hinten rechts _______________________________________________ -->

	<link name="rear_right_wheel_white_link">
        <visual>
            <origin xyz="0 0 .35" rpy="-1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_white.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".7" radius=".045"/>
            </geometry>
        </collision>

        <inertial>
            <mass value="35"/>
            <inertia ixx="1.447" iyy="1.447" izz=".035" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="rear_right_wheel_white_link">
        <material>Gazebo/White</material>
    </gazebo>
    
    <joint name="rear_right_wheel_white_joint" type="continuous">
        <parent link="mainbody_link"/>
        <child link="rear_right_wheel_white_link"/>
        <origin rpy="-1.5708 0 0" xyz="-0.575 -.35 0"/>
        <limit effort="2500" velocity="100" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
    <link name="rear_right_wheel_black_link">
        <visual>
            <origin xyz="0 0 .73" rpy="-1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".12" radius=".246"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="30"/>
            <inertia ixx=".49" iyy=".49" izz=".91" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="rear_right_wheel_black_link">

        <mu1>0.9</mu1>
       
        <mu2>0.9</mu2>
        <!--
            
        <fdir1>1 0 0</fdir1>
        
        <min_depth>0.01</min_depth> 
        
        <kd>32000.0</kd>
        <kp>16000000.0</kp>
        -->
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="rear_right_wheel_black_joint" type="fixed">
        <parent link="rear_right_wheel_white_link"/>
        <child link="rear_right_wheel_black_link"/>
        <origin rpy="0 0 0" xyz=".0 0 -.38"/>
    </joint>

    <!-- _______________________________________________ Gummirad hinten links _______________________________________________ -->

	<link name="rear_left_wheel_white_link">
        <visual>
            <origin xyz="0 0 -.35" rpy="1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_white.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".7" radius=".045"/>
            </geometry>
        </collision>

        <inertial>
            <mass value="35"/>
            <inertia ixx="1.447" iyy="1.447" izz=".035" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="rear_left_wheel_white_link">
        <material>Gazebo/White</material>
    </gazebo>
    
    <joint name="rear_left_wheel_white_joint" type="continuous">
        <parent link="mainbody_link"/>
        <child link="rear_left_wheel_white_link"/>
        <origin rpy="-1.5708 0 0" xyz="-0.575 .35 0"/>
        <limit effort="2500" velocity="100" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
    <link name="rear_left_wheel_black_link">
        <visual>
            <origin xyz="0 0 -.73" rpy="1.570796327 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_wheel_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <cylinder length=".12" radius=".246"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="30"/>
            <inertia ixx=".49" iyy=".49" izz=".91" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="rear_left_wheel_black_link">

        <mu1>0.9</mu1>
       
        <mu2>0.9</mu2>
        <!--
        
        <fdir1>1 0 0</fdir1>
               
        <min_depth>0.01</min_depth> 
        
        <kd>32000.0</kd>
        <kp>16000000.0</kp>
         -->      
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="rear_left_wheel_black_joint" type="fixed">
        <parent link="rear_left_wheel_white_link"/>
        <child link="rear_left_wheel_black_link"/>
        <origin rpy="0 0 0" xyz=".0 0 .38"/>
    </joint>   
    <!-- _______________________________________________ Spurfuhrungsrad-Achse vorne _______________________________________________ -->    
    
   
    <link name="front_axle_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_axle_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <box size=".1 1.65 .1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="475"/>
            <inertia ixx="11.385" iyy=".083" izz="11.385" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>

    <gazebo reference="front_axle_link">
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="front_axle_joint" type="prismatic">
        <parent link="base_link"/>
        <child link="front_axle_link"/>
        <origin rpy="0 0 0" xyz="0.930109 0 -.026"/>
		<limit effort="5000" velocity="10" lower="0" upper="0.15" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
  	<transmission name="tran1">
    	<type>transmission_interface/SimpleTransmission</type>
    	<joint name="front_axle_joint">
      		<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    	</joint>
    	<actuator name="motor1">
      		<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
    	</actuator>
  	</transmission>
     
    <link name="front_axle_right_wheel_link">
        <collision>
            <geometry>
                <cylinder length=".08" radius=".06"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="10"/>
            <inertia ixx=".014" iyy=".014" izz=".018" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    
    <joint name="front_axle_right_wheel_joint" type="continuous">
        <parent link="front_axle_link"/>
        <child link="front_axle_right_wheel_link"/>
        <origin rpy="1.570796327 0 0" xyz="0 -.75 -.16"/>
		<limit effort="25000" velocity="20000" />
		<axis xyz="0 0 1"/>
    </joint>
     
    <link name="front_axle_guide_r_link">
        <inertial>
            <mass value="1"/>
            <inertia ixx=".0233333" iyy=".0233333" izz=".005" ixy="0" ixz="0" iyz="0"/>
        </inertial>
        <collision>
            <geometry>
                <cylinder length="0.06" radius=".015"/>
            </geometry>
        </collision>
    </link>
   
    <link name="front_axle_left_wheel_link">
        <collision>
            <geometry>
                <cylinder length=".08" radius=".06"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="10"/>
            <inertia ixx=".014" iyy=".014" izz=".018" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    
    <joint name="front_axle_left_wheel_joint" type="continuous">
        <parent link="front_axle_link"/>
        <child link="front_axle_left_wheel_link"/>
        <origin rpy="1.570796327 0 0" xyz="0 .75 -.16"/>
		<limit effort="25000" velocity="20000" />
		<axis xyz="0 0 1"/>
    </joint>
    
    <gazebo reference="front_axle_guide_r_link">
        <mu1>0</mu1>
        <mu2>0</mu2>
    </gazebo>
    
    <joint name="front_axle_guide_r_joint" type="continuous">
        <parent link="front_axle_link"/>
        <child link="front_axle_guide_r_link"/>
        <origin rpy="0 0 0" xyz="0 -.698 -.23"/>
        <axis xyz="0 0 1"/>
    </joint>
   
    <link name="front_axle_guide_l_link">
        <inertial>
            <mass value="1"/>
            <inertia ixx=".0233333" iyy=".0233333" izz=".005" ixy="0" ixz="0" iyz="0"/>
        </inertial>
        <collision>
            <geometry>
                <cylinder length="0.06" radius=".015"/>
            </geometry>
        </collision>
    </link>
    
    <gazebo reference="front_axle_guide_l_link">
        <mu1>0</mu1>
        <mu2>0</mu2>
    </gazebo>
    
    <joint name="front_axle_guide_l_joint" type="continuous">
        <parent link="front_axle_link"/>
        <child link="front_axle_guide_l_link"/>
        <origin rpy="0 0 0" xyz="0 .698 -.23"/>
        <axis xyz="0 0 1"/>
    </joint>  
     

    <!-- _______________________________________________ Spurfuhrungsrad-Achse hinten _______________________________________________ -->    
    
   
    
    <link name="rear_axle_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/rotrac_e2_axle_black.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <geometry>
                <box size=".1 1.65 .1"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="475"/>
            <inertia ixx="11.385" iyy=".083" izz="11.385" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    <gazebo reference="rear_axle_link">
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="rear_axle_joint" type="prismatic">
        <parent link="base_link"/>
        <child link="rear_axle_link"/>
        <origin rpy="0 0 3.141592654" xyz="-0.930109 0 -.026"/>
		<limit effort="5000" velocity="10" lower="0" upper="0.15" />
		<joint_properties damping="0.7"/>
		<axis xyz="0 0 1"/>
    </joint>
    
    <transmission name="tran2">
    	<type>transmission_interface/SimpleTransmission</type>
    	<joint name="rear_axle_joint">
      		<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    	</joint>
    	<actuator name="motor2">
      		<hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      		<mechanicalReduction>1</mechanicalReduction>
    	</actuator>
  </transmission>
    
    <link name="rear_axle_right_wheel_link">
        <collision>
            <geometry>
                <cylinder length=".08" radius=".06"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="10"/>
            <inertia ixx=".014" iyy=".014" izz=".018" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    
    <joint name="rear_axle_right_wheel_joint" type="continuous">
        <parent link="rear_axle_link"/>
        <child link="rear_axle_right_wheel_link"/>
        <origin rpy="1.570796327 0 0" xyz="0 .75 -.16"/>
		<limit effort="100" velocity="100" />
		<axis xyz="0 0 1"/>
    </joint>
       
    <link name="rear_axle_guide_r_link">
        <inertial>
            <mass value="1"/>
            <inertia ixx=".0233333" iyy=".0233333" izz=".005" ixy="0" ixz="0" iyz="0"/>
        </inertial>
        <collision>
            <geometry>
                <cylinder length="0.06" radius=".015"/>
            </geometry>
        </collision>
    </link>
 
    <gazebo reference="rear_axle_guide_r_link">
        <mu1>0</mu1>
        <mu2>0</mu2>
    </gazebo>
    
    <joint name="rear_axle_guide_r_joint" type="continuous">
        <parent link="rear_axle_link"/>
        <child link="rear_axle_guide_r_link"/>
        <origin rpy="0 0 0" xyz="0 .698 -.23"/>
        <axis xyz="0 0 1"/>
    </joint>
    
    
    <link name="rear_axle_left_wheel_link">
        <collision>
            <geometry>
                <cylinder length=".08" radius=".06"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="10"/>
            <inertia ixx=".014" iyy=".014" izz=".018" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    
    <joint name="rear_axle_left_wheel_joint" type="continuous">
        <parent link="rear_axle_link"/>
        <child link="rear_axle_left_wheel_link"/>
        <origin rpy="1.570796327 0 0" xyz="0 -.75 -.16"/>
		<limit effort="100" velocity="100" />
		<axis xyz="0 0 1"/>
    </joint>
     
    <link name="rear_axle_guide_l_link">
        <inertial>
            <mass value="1"/>
            <inertia ixx=".0233333" iyy=".0233333" izz=".005" ixy="0" ixz="0" iyz="0"/>
        </inertial>
        <collision>
            <geometry>
                <cylinder length="0.06" radius=".015"/>
            </geometry>
        </collision>
    </link>
    
    <gazebo reference="rear_axle_guide_l_link">
        <mu1>0</mu1>
        <mu2>0</mu2>
    </gazebo>
    
    <joint name="rear_axle_guide_l_joint" type="continuous">
        <parent link="rear_axle_link"/>
        <child link="rear_axle_guide_l_link"/>
        <origin rpy="0 0 0" xyz="0 -.698 -.23"/>
        <axis xyz="0 0 1"/>
    </joint> 
    
    
    <!-- _______________________________________________ Kupplung _______________________________________________ -->
    
    
    <link name="front_couplerbase_link">
        <visual>
            <origin xyz=".724 0 .6" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/coupler_base.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="1 0 .75" rpy="0 0 0"/>
            <geometry>
                <box size="1.0 0.3 .3"/>
            </geometry>
		</collision>
        <inertial>
            	<origin xyz="0 0 .1445" rpy="0 0 0"/>
            	<mass value="40"/>
            <inertia ixx="0.5" iyy=".5" izz=".8" ixy="0" ixz="0" iyz="0"/>
        </inertial>  
    </link>
    <gazebo reference="front_couplerbase_link">
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="front_couplerbase_joint" type="fixed">
        <parent link="mainbody_link"/>
        <child link="front_couplerbase_link"/>
    </joint>
    
    <link name="front_couplermouth_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/coupler_mouth.dae" scale="1 1 1"/>
            </geometry>
        </visual>

        <inertial>
            <origin xyz="0 0 .1445" rpy="0 0 3.141592654"/>
            <mass value="40"/>
            <inertia ixx="0.5" iyy=".5" izz=".8" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    <gazebo reference="front_couplermouth_link">
        <material>Gazebo/Yellow</material>
    </gazebo>
    
    <joint name="front_couplerbase_couplermouth_joint" type="fixed">
        <parent link="front_couplerbase_link"/>
        <child link="front_couplermouth_link"/>
        <origin rpy="0 0 0" xyz=".724 0 .6"/>
        <limit lower="-.15" upper=".15" effort="1.0" velocity="0.5"/>
        <axis xyz="0 0 1"/>
    </joint>    
    
    <!--
     <link name="front_coupler_link">
        <collision name='front_coupling_collision'>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="1.0 0.3 .3"/>
            </geometry>
		</collision>
        <inertial>
            	<origin xyz="0 0 .1445" rpy="0 0 0"/>
            	<mass value="40"/>
            <inertia ixx="0.5" iyy=".5" izz=".8" ixy="0" ixz="0" iyz="0"/>
        </inertial>  
     </link>

    <joint name="front_coupler_link_joint" type="revolute">
        <parent link="mainbody_link"/>
        <child link="front_coupler_link"/>
        <origin rpy="0 0 3.141592654" xyz="1 0 .7"/>
        <limit lower="-.25" upper=".25" effort="1.0" velocity="0.5"/>
        <axis xyz="0 0 1"/>
        </joint>
    -->
    
    <link name="rear_couplerbase_link">
        <visual>
            <origin xyz="-.724 0 .6" rpy="0 0 3.141592654"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/coupler_base.dae" scale="1 1 1"/>
            </geometry>
        </visual>
        <collision>
            <origin xyz="-1 0 .75" rpy="0 0 0"/>
            <geometry>
                <box size="1.0 0.3 .3"/>
            </geometry>
		</collision>
        <inertial>
            	<origin xyz="0 0 .1445" rpy="0 0 0"/>
            	<mass value="40"/>
            <inertia ixx="0.5" iyy=".5" izz=".8" ixy="0" ixz="0" iyz="0"/>
        </inertial>  
    </link>
    <gazebo reference="rear_couplerbase_link">
        <material>Gazebo/DarkGrey</material>
    </gazebo>
    
    <joint name="rear_couplerbase_joint" type="fixed">
        <parent link="mainbody_link"/>
        <child link="rear_couplerbase_link"/>
    </joint>
    
    <link name="rear_couplermouth_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 3.141592654"/>
            <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/rotrac_e2/meshes/coupler_mouth.dae" scale="1 1 1"/>
            </geometry>
        </visual>

        <inertial>
            <origin xyz="0 0 .1445" rpy="0 0 0"/>
            <mass value="40"/>
            <inertia ixx="0.5" iyy=".5" izz=".8" ixy="0" ixz="0" iyz="0"/>
        </inertial>
    </link>
    <gazebo reference="rear_couplermouth_link">
        <material>Gazebo/Yellow</material>
    </gazebo>
    
    <joint name="rear_couplerbase_couplermouth_joint" type="fixed">
        <parent link="rear_couplerbase_link"/>
        <child link="rear_couplermouth_link"/>
        <origin rpy="0 0 0" xyz="-.724 0 .6"/>
        <limit lower="-.15" upper=".15" effort="1.0" velocity="0.5"/>
        <axis xyz="0 0 1"/>
    </joint>    

  <!-- _______________________________________________ Sensorik _______________________________________________ -->
    
	<link name="front_sensormounting_base_link">
		<inertial>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<mass value="0.001" />
			<inertia ixx="9.1875e-09" ixy="0.0" ixz="0.0" iyy="9.1875e-09" iyz="0.0" izz="1.378125e-08"/>
		</inertial>
		<visual>
			<origin rpy="1.570796327 0 0" xyz="0 0 0"/>
           <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/sensorik/meshes/tim571-base_colibri.dae"/>            
            </geometry>
		</visual>
	</link>
    <joint name="front_sensormounting_base__joint" type="fixed">
        <parent link="body_green_link"/>
        <child link="front_sensormounting_base_link"/>
        <origin rpy="0 0 0" xyz="1.078 0 .3305"/>
    </joint>
    <gazebo reference="front_sensormounting_base_link">
        <material>Gazebo/Grey</material>
    </gazebo>
	
	<link name="front_camera_link">
		<!-- Inertial for gazebo to take it into account, Put 1gr weight -->
		<inertial>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<mass value="0.001" />
			<inertia ixx="9.1875e-09" ixy="0.0" ixz="0.0" iyy="9.1875e-09" iyz="0.0" izz="1.378125e-08"/>
		</inertial>
	</link>

	<link name="camera_front_frame_optical"/>
	<joint name="camera_front_optical_joint" type="fixed">
			<origin xyz="0 0 0" rpy="-1.570796327 0 -1.570796327"/>
			<parent link="front_camera_link"/>
			<child link="camera_front_frame_optical"/>
	</joint>

    <gazebo reference="front_camera_link">
        <mu1>0</mu1>
		<mu2>0</mu2>
		<material>Gazebo/Red</material>
		<sensor type="depth" name="camera">
			<update_rate>30.0</update_rate>
			<camera name="head">
				<pose>0 0 0 0 0 0</pose>
				<horizontal_fov>1.3962634</horizontal_fov>
				<image>
					<width>1024</width>
					<height>768</height>
					<format>R8G8B8</format>
				</image>
				<clip>
					<near>0.05</near>
					<far>200</far>
				</clip>
				<noise>
					<type>gaussian</type>
					<stddev>0.02</stddev>
				</noise>
			</camera>
			<plugin name="camera_plugin" filename="libgazebo_ros_openni_kinect.so">
				<baseline>0.2</baseline>
				<alwaysOn>true</alwaysOn>
				<!-- Keep this zero, update_rate in the parent <sensor> tag
				will control the frame rate. -->
				<updateRate>0.0</updateRate>
				<cameraName>rotrac_e2/camera_front</cameraName>
				<imageTopicName>/camera_front/color/image_raw</imageTopicName>
				<cameraInfoTopicName>/camera_front/color/camera_info</cameraInfoTopicName>
				<depthImageTopicName>/camera_front/depth/image_raw</depthImageTopicName>
				<depthImageCameraInfoTopicName>/camera_front/depth/camera_info</depthImageCameraInfoTopicName>
				<pointCloudTopicName>/camera_front/depth/points</pointCloudTopicName>
				<frameName>camera_front_frame_optical</frameName>
				<pointCloudCutoff>0.05</pointCloudCutoff>
				<pointCloudCutoffMax>30.0</pointCloudCutoffMax>
				<distortionK1>0</distortionK1>
				<distortionK2>0</distortionK2>
				<distortionK3>0</distortionK3>
				<distortionT1>0</distortionT1>
				<distortionT2>0</distortionT2>
				<CxPrime>0</CxPrime>
				<Cx>0</Cx>
				<Cy>0</Cy>
				<focalLength>0</focalLength>
				<hackBaseline>0</hackBaseline>
			</plugin>
		</sensor>
	</gazebo>

    <joint name="front_camera_joint" type="fixed">
        <parent link="front_sensormounting_base_link"/>
        <child link="front_camera_link"/>
        <origin rpy="0 0 0" xyz="0 0.102 0.0438 "/>
    </joint>
   
	<link name="front_laser_base_link">
    	<collision>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <geometry>
    	    <box size="0.01 0.01 0.01"/>
    	  </geometry>
    	</collision>
    	<visual>
    	  <origin rpy="1.570796327 0 0" xyz="0 0 0"/>
    	  <geometry>
            <mesh filename="package://coupling_detection_gazebo/models/sensorik/meshes/tim571.dae"/>            
    	  </geometry>
        </visual>
    	<inertial>
    	  <mass value="1"/>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <inertia ixx=".1" ixy="0" ixz="0" iyy=".1" iyz="0" izz=".1"/>
    	</inertial>
  	</link>
    
  	<joint name="front_laser_base_joint" type="revolute">
        <origin rpy="0 0 0" xyz="-.032 0 .063"/> <!-- <origin rpy="0 0 0" xyz="-.032 0 .063-dz"/> -->
    	<parent link="front_sensormounting_base_link"/>
    	<child link="front_laser_base_link"/>
        <axis xyz=" 0 1 0"/>
        <limit upper=".785398163" lower="-.174532925" velocity="1" effort="1"/>
  	</joint>
    <gazebo reference="front_laser_base_link">
        <material>Gazebo/Grey</material>
    </gazebo>
    
    <link name="front_laser_link">
    	<collision>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <geometry>
    	    <box size="0.01 0.01 0.01"/>
    	  </geometry>
    	</collision>
    	<inertial>
    	  <mass value="1e-5"/>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    	</inertial>
  	</link>
    
  	<joint name="front_laser_joint" type="fixed">
        <origin rpy="0 0.785 0" xyz="0 0 .035"/>
    	<parent link="front_laser_base_link"/>
    	<child link="front_laser_link"/>
  	</joint>
    
  	
    <link name="rear_sensormounting_base_link">
		<inertial>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<mass value="0.001" />
			<inertia ixx="9.1875e-09" ixy="0.0" ixz="0.0" iyy="9.1875e-09" iyz="0.0" izz="1.378125e-08"/>
		</inertial>
		<visual>
			<origin rpy="1.570796327 0 0" xyz="0 0 0"/>
           <geometry>
                <mesh filename="package://coupling_detection_gazebo/models/sensorik/meshes/tim571-base_colibri.dae"/>            
            </geometry>
		</visual>
	</link>
    <joint name="rear_sensormounting_base__joint" type="fixed">
        <parent link="body_green_link"/>
        <child link="rear_sensormounting_base_link"/>
        <origin rpy="0 0 3.141592654" xyz="-1.078 0 .3305"/>
    </joint>
    <gazebo reference="rear_sensormounting_base_link">
        <material>Gazebo/Grey</material>
    </gazebo>
	
	<link name="rear_camera_link">
		<!-- Inertial for gazebo to take it into account, Put 1gr weight -->
		<inertial>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<mass value="0.001" />
			<inertia ixx="9.1875e-09" ixy="0.0" ixz="0.0" iyy="9.1875e-09" iyz="0.0" izz="1.378125e-08"/>
		</inertial>
	</link>

	<link name="camera_rear_frame_optical"/>
	<joint name="camera_rear_optical_joint" type="fixed">
			<origin xyz="0 0 0" rpy="-1.570796327 0 -1.570796327"/>
			<parent link="rear_camera_link"/>
			<child link="camera_rear_frame_optical"/>
	</joint>

	<gazebo reference="rear_camera_link">
		<mu1>0</mu1>
		<mu2>0</mu2>
		<material>Gazebo/Red</material>
		<sensor type="depth" name="camera">
			<update_rate>30.0</update_rate>
			<camera name="head">
				<pose>0 0 0 0 0 0</pose>
				<horizontal_fov>1.3962634</horizontal_fov>
				<image>
					<width>1024</width>
					<height>768</height>
					<format>R8G8B8</format>
				</image>
				<clip>
					<near>0.05</near>
					<far>200</far>
				</clip>
				<noise>
					<type>gaussian</type>
					<stddev>5.2</stddev>
				</noise>
			</camera>
			<plugin name="camera_plugin" filename="libgazebo_ros_openni_kinect.so">
				<baseline>0.2</baseline>
				<alwaysOn>true</alwaysOn>
				<!-- Keep this zero, update_rate in the parent <sensor> tag
				will control the frame rate. -->
				<updateRate>0.0</updateRate>
				<cameraName>rotrac_e2/camera_rear</cameraName>
				<imageTopicName>/camera_rear/color/image_raw</imageTopicName>
				<cameraInfoTopicName>/camera_rear/color/camera_info</cameraInfoTopicName>
				<depthImageTopicName>/camera_rear/depth/image_raw</depthImageTopicName>
				<depthImageCameraInfoTopicName>/camera_rear/depth/camera_info</depthImageCameraInfoTopicName>
				<pointCloudTopicName>/camera_rear/depth/points</pointCloudTopicName>
				<frameName>camera_rear_frame_optical</frameName>
				<pointCloudCutoff>0.05</pointCloudCutoff>
				<pointCloudCutoffMax>30.0</pointCloudCutoffMax>
				<distortionK1>0</distortionK1>
				<distortionK2>0</distortionK2>
				<distortionK3>0</distortionK3>
				<distortionT1>0</distortionT1>
				<distortionT2>0</distortionT2>
				<CxPrime>0</CxPrime>
				<Cx>0</Cx>
				<Cy>0</Cy>
				<focalLength>0</focalLength>
				<hackBaseline>0</hackBaseline>
			</plugin>
		</sensor>
	</gazebo>

    <joint name="rear_camera_joint" type="fixed">
        <parent link="rear_sensormounting_base_link"/>
        <child link="rear_camera_link"/>
        <origin rpy="0 0 0" xyz="0 0.102 0.0438 "/>
    </joint>
    
    <link name="rear_laser_base_link">
    	<collision>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <geometry>
    	    <box size="0.01 0.01 0.01"/>
    	  </geometry>
    	</collision>
    	<visual>
    	  <origin rpy="1.570796327 0 0" xyz="0 0 0"/>
    	  <geometry>
            <mesh filename="package://coupling_detection_gazebo/models/sensorik/meshes/tim571.dae"/>            
    	  </geometry>
        </visual>
    	<inertial>
    	  <mass value="1"/>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <inertia ixx=".1" ixy="0" ixz="0" iyy=".1" iyz="0" izz=".1"/>
    	</inertial>
  	</link>
    
  	<joint name="rear_laser_base_joint" type="fixed">
        <origin rpy="0 0 0" xyz="-.032 0 .063"/> <!-- <origin rpy="0 0 0" xyz="-.032 0 .063-dz"/> -->
    	<parent link="rear_sensormounting_base_link"/>
    	<child link="rear_laser_base_link"/>
  	</joint>

    <!--<joint name="rear_laser_base_joint" type="revolute">
        <origin rpy="0 0 0" xyz="-.032 0 .063"/>
    	<parent link="rear_sensormounting_base_link"/>
    	<child link="rear_laser_base_link"/>
        <axis xyz=" 0 1 0"/>
        <limit upper=".785398163" lower="-.174532925" velocity="1" effort="1"/>
  	</joint>-->

    <gazebo reference="rear_laser_base_link">
        <material>Gazebo/Grey</material>
    </gazebo>
    
    <link name="rear_laser_link">
    	<collision>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <geometry>
    	    <box size="0.01 0.01 0.01"/>
    	  </geometry>
    	</collision>
    	<inertial>
    	  <mass value="1e-5"/>
    	  <origin rpy="0 0 0" xyz="0 0 0"/>
    	  <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    	</inertial>
  	</link>
    
  	<joint name="rear_laser_joint" type="fixed">
        <origin rpy="0 0 0" xyz="0.1 0 .035"/>
    	<parent link="rear_laser_base_link"/>
    	<child link="rear_laser_link"/>
  	</joint>
    
    <gazebo reference="rear_laser_link">
    	<mu1>0</mu1>
    	<mu2>0</mu2>
    	<material>Gazebo/Red</material>
    	<sensor name="rear_laser_sensor" type="ray">
    	  <pose>0 0 0 0 0 0</pose>
    	  <visualize>false</visualize>
    	  <update_rate>15</update_rate>
    	  <ray>
    	    <scan>
    	      <horizontal>
    	        <samples>270</samples>
    	        <resolution>1</resolution>
    	        <min_angle>-1.1781</min_angle> <!--2.35619449-->
    	        <max_angle>1.1781</max_angle>
    	      </horizontal>
              <vertical>
    	        <samples>110</samples>
    	        <resolution>1</resolution>
    	        <min_angle>-0.174532925</min_angle>
    	        <max_angle>0.785398163</max_angle>
    	      </vertical>
    	    </scan>
    	    <range>
    	      <min>0.050</min>
    	      <max>25.0</max>
    	      <resolution>0.02</resolution>
    	    </range>
    	    <noise>
    	      <type>gaussian</type>
    	      <!--Noise parameters based on published spec for Hokuyo laser
								achieving "+-30mm" accuracy at range < 10m.  A mean of 0.0m and
								stddev of 0.01m will put 99.7% of samples within 0.03m of the true
								reading.-->
    	      <mean>0.0</mean>
    	      <stddev>0.005</stddev>
    	    </noise>
    	  </ray>
    	  <plugin filename="libgazebo_ros_block_laser.so" name="gazebo_ros_front_laser_controller">
    	    <topicName>/rotrac_e2/laser_rear/scan/</topicName>
    	    <frameName>rear_laser_link</frameName>
    	  </plugin>
    	</sensor>
  	</gazebo>
<!-- _______________________________________________ Motor _______________________________________________   
    
    <transmission name="tran1">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="front_left_wheel_white_joint">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor1">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>

    <transmission name="tran2">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="front_right_wheel_white_joint">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor2">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>

    <transmission name="tran3">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="rear_left_wheel_white_joint">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor3">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>

    <transmission name="tran4">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="rear_right_wheel_white_joint">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor4">
            <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
            <mechanicalReduction>1</mechanicalReduction>
        </actuator>
    </transmission>
-->  
<!-- _______________________________________________ Driver _______________________________________________  -->

<!-- -->
	<gazebo>
		<plugin name="skid_steer_drive_controller" filename="libgazebo_ros_skid_steer_drive.so">
			<updateRate>100.0</updateRate>
			<leftFrontJoint>front_left_wheel_white_joint</leftFrontJoint>
			<rightFrontJoint>front_right_wheel_white_joint</rightFrontJoint>
			<leftRearJoint>rear_left_wheel_white_joint</leftRearJoint>
			<rightRearJoint>rear_right_wheel_white_joint</rightRearJoint>
			<robotBaseFrame>base_link</robotBaseFrame>
			<robotNamespace>/</robotNamespace>
			<torque>2500</torque>
			<commandTopic>cmd_vel</commandTopic>
			<odometryTopic>odom</odometryTopic>
			<odometryFrame>odom</odometryFrame>
			<broadcastTF>true</broadcastTF>
			<wheelSeparation>1.15</wheelSeparation>
			<wheelDiameter>0.492</wheelDiameter>
			<covariance_x>0.00001</covariance_x>
			<covariance_y>0.00001</covariance_y>
			<covariance_yaw>0.01</covariance_yaw>
		</plugin>
	</gazebo>
   
</robot>
